language: python
python: 3.7
branches: master

install:
    - pip install pdoc3
    - pip install -e .

script: true

before_deploy:
    - ls -l
    - pdoc --html --force --output-dir docs nvx
    - mv docs/nvx/* docs
    - rmdir docs/nvx

deploy: # Deploy documentation to Github in the gh_pages branch
    provider: pages
    skip_cleanup: true
    github_token: $github_token
    local_dir: site
    on:
        branch: master
